ALTER TABLE Session ADD SesOauthScope  VARGRAPHIC(1024) CCSID 13488  ADD SesOauthTokenExpires  DECIMAL( 6)  ADD SesOauthTokenMaxRenew  DECIMAL( 4)  ADD SesAutTypeName  GRAPHIC(60) CCSID 13488  ADD SesExtToken2  VARGRAPHIC(1024) CCSID 13488

ALTER TABLE SessionHistory ADD SesHisOauthScope  VARGRAPHIC(1024) CCSID 13488  ADD SesHisOauthTokenExpires  DECIMAL( 6)  ADD SesHisOauthTokenMaxRenew  DECIMAL( 4)  ADD SesHisAppTokenExp  TIMESTAMP  ADD SesHisDeviceId  GRAPHIC(40) CCSID 13488  ADD SesHisRefreshToken  GRAPHIC(40) CCSID 13488  ADD SesHisAppId  DECIMAL( 12)  ADD SesHisExtToken2  VARGRAPHIC(1024) CCSID 13488

ALTER TABLE Application ADD AppCliLocalLoginURL  VARGRAPHIC(1024) CCSID 13488  ADD AppCliAllowGetUserAdditionalDa  DECIMAL( 1)  ADD AppCliAllowGetUserRoles  DECIMAL( 1)  ADD AppCliAllowRemoteAuth  DECIMAL( 1)
ALTER TABLE Application ALTER COLUMN AppCliSecret SET DATA TYPE GRAPHIC(120) CCSID 13488
CREATE INDEX IAPPLICATIONENV ON Application (RepId ,AppId ,AppCurEnvId )

CREATE TABLE UserMemRoleProp (UserGUID  GRAPHIC(40) CCSID 13488 NOT NULL , RepId  DECIMAL( 9) NOT NULL , UserMemRoleRoleId  DECIMAL( 12) NOT NULL , UserMemRolePropId  GRAPHIC(60) CCSID 13488 NOT NULL , UserMemRolePropToken  GRAPHIC(40) CCSID 13488 NOT NULL , UserMemRolePropValue  VARGRAPHIC(400) CCSID 13488 NOT NULL , PRIMARY KEY(UserGUID, RepId, UserMemRoleRoleId, UserMemRolePropId, UserMemRolePropToken))

CREATE TABLE UserMemAppRoleProp (UserGUID  GRAPHIC(40) CCSID 13488 NOT NULL , RepId  DECIMAL( 9) NOT NULL , UserMemAppRoleAppId  DECIMAL( 12) NOT NULL , UserMemAppRoleRoleId  DECIMAL( 12) NOT NULL , UserMemAppRolePropId  GRAPHIC(60) CCSID 13488 NOT NULL , UserMemAppRolePropToken  GRAPHIC(40) CCSID 13488 NOT NULL , UserMemAppRolePropValue  VARGRAPHIC(400) CCSID 13488 NOT NULL , PRIMARY KEY(UserGUID, RepId, UserMemAppRoleAppId, UserMemAppRoleRoleId, UserMemAppRolePropId, UserMemAppRolePropToken))

CREATE TABLE SecurityPolicyProp (RepId  DECIMAL( 9) NOT NULL , SecPolId  DECIMAL( 9) NOT NULL , SecPolPropId  GRAPHIC(60) CCSID 13488 NOT NULL , SecPolPropToken  GRAPHIC(40) CCSID 13488 NOT NULL , SecPolPropValue  VARGRAPHIC(400) CCSID 13488 NOT NULL , PRIMARY KEY(RepId, SecPolId, SecPolPropId, SecPolPropToken))

DROP INDEX IUSERMEMAPPROLE1
CREATE INDEX IUSERMEMAPPROLEAPP ON UserMemAppRole (RepId ,UserMemAppRoleAppId )
CREATE INDEX IUSERMEMAPPROLEROLE ON UserMemAppRole (RepId ,UserMemAppRoleRoleId )

RENAME TABLE SessionHistoryHisLogAtt TO SessionHistoryLogAtt

UPDATE SysPar SET SysParVal='3.0.6' WHERE SysParId='GAMVersion'
